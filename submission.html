
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Positive Portfolio Factor</title>
  <!--this a comment to make file test-->

  <!-- Link to the jQuery -->
  <script src="https://code.jquery.com/jquery-2.2.3.js" integrity="sha256-laXWtGydpwqJ8JA+X9x2miwmaiKhn8tVmOVEigRNtP4=" crossorigin="anonymous"></script>

  <!-- Link to the Bootstrap-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <!-- link to google fonts -->
  <link href="https://fonts.googleapis.com/css?family=Cairo|Montserrat|Raleway|Titillium+Web" rel="stylesheet">

  <!--Link to Firebase library-->
  <script src="https://www.gstatic.com/firebasejs/4.3.0/firebase.js"></script>

  <!--Moment js, date library for parsing, validating, manipulating, and formatting dates-->

  <script src="https://cdn.jsdelivr.net/momentjs/2.18.1/moment.min.js"></script>

  <!-- style css file -->
  <link rel="stylesheet" href="assets/css/style.css">

</head>

<body>

  <div class="container">

    <!-- Jumbotron with Title -->
    <div class="jumbotron">

      <h1 class="text-center"><strong>Positive Portfolio Factor</strong></h1>
      <h2 class="text-center">Submit your project for peer review</h2>
    </div>

<!--project table panel-->
    <div class="row">

      <div class ="col-lg-12">

        <div class="panel panel-primary">
          <div class="panel-heading">
            <h3 class ="panel-title current"><strong>Submit your Project</strong></h3>
          </div> <!--close panel-heading-->

          <div class="panel-body">
            <table class="table table-hover" id="projectTable">
              <thread>
                <tr>
                  <th>Project Name</th>
                     <!-- <th>Line</th>-->
                  <th>user.github.io</th>
                  <th>Date submitted</th>
                  <th>Project Comment (limit 40 characters)</th>
                </tr>
              </thread>

              <tbody>

              </tbody>
            </table>
          </div> <!--close panel-body-->
        </div> <!--close panel-primary-->

<!--Adding projects-->
      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class ="panel-title addition"><strong>Add your project for review</strong></h3>
        </div> <!--close panel-heading-->

        <div class="panel-body">
             <!--close panel body-->
<!--Form-->
            <form>
              <div class ="form-group">
                <label for="">Project Name</label>
                <input type="text" class="form-control" id="proNameInput">
              </div>

              <div class = "form-group">
                 <label for="">user.github.io</label>
                 <input type="text" class="form-control" id="githubInput">
              </div>

              <div class = "form-group"><!--make a dropdown-->
                 <label for="">Date Submitted (DD MMM YYYY, hh:mm)</label>
                 <input type="text" class="form-control" id="dateTimeInput">
              </div>

              <div class = "form-group">
                 <label for="">Project Comment (limit 40 characters)</label>
                 <input type="text" class="form-control" id="commentInput">
              </div>

              <button type="submit" class="btn btn-primary" id="addProjectBtn">Submit</button>
            </form>

          </div>  <!--close panel body for adding project-->
        </div> <!--close panel-primary for adding project-->
      </div> <!--close class col-lg-12-->
    </div>  <!--close class row for all-->
  </div> <!--close container-->

<!--javascript file-->
<script src="assets/javascript/app.js"></script>

<script>
// Initialize Firebase
  var config = {
    apiKey: "AIzaSyDUFbkSrcv1by112f47fQfoTn9rUsjIGYo",
    authDomain: "project-1-dc253.firebaseapp.com",
    databaseURL: "https://project-1-dc253.firebaseio.com",
    projectId: "project-1-dc253",
    storageBucket: "project-1-dc253.appspot.com",
    messagingSenderId: "838586150577"
  };
  firebase.initializeApp(config);
  console.log(config);

  var database = firebase.database();
  console.log(database);

//create click event when user submits form
  $("#addProjectBtn").on("click", function(){
      console.log("submit has been clicked!");
    var projectName= $("#proNameInput").val().trim();
    var githubName = $("#githubInput").val().trim();
    var dateTime = moment($("#dateTimeInput").val().trim(),"MM/DD/YY, HH:mm").format("MM/DD/YY, HH:mm");
    var comment = $("#commentInput").val().trim();

//create temp storage into an object of the user inputs; childSnapShot

  var newProjectInfo = {
    name: projectName,
    userName: githubName,
    date: dateTime,
    comm: comment
  }

//upload project info/data to database
  database.ref().push(newProjectInfo);
  console.log(newProjectInfo.name);

  //clears text from boxes. study .val()
  $("#proNameInput").val("");
  $("#githubInput").val("");
  $("#dateTimeInput").val("");
  $("#commentInput").val("");
  //prevents going to new page
  return false;
  });//close add project btn event

  //create firebase event
  database.ref().on("child_added", function(childSnapshot){//study firebase event and  childSnapShot
    console.log(childSnapshot.val());

  //store childSnapSot values into a variable

  var projectName=childSnapshot.val().name;
  var githubName=childSnapshot.val().place;
  var dateSubmit=childSnapshot.val().firstProSubmit;
  var comment =childSnapshot.val().frequency;

//var firstTimeConverted = moment(firstProjectTime, "MM/DD/YY, HH:mm");
//console.log(firstTimeConverted);

  //store format in current time
   var currentDate = moment.unix(firstProjectTime).format("MM/DD/YY, HH:mm");

  //var currentDate = moment().format("MM/DD/YY, HH:mm"); //study moment().format
  console.log("Date Submitted" + currentDate);
  console.log(firstProjectTime);

  var diffDays = moment().diff(moment.unix(firstProjectTime, "X"), "days");
    console.log(diffDays);


  //add tag to #projectTable at <tbody>
  $("#projectTable>tbody").append("<tr><td>" + projectName + "</td><td>" + githubName + "</td><td>" + dateSubmit + "</td><td>" + comment +"</td><td>");
  });//close firebase on event


// <tr> tag defines a row in an HTML table.
// <td> regular cell in tale
// <th> header cell in table

//The <tbody> tag is used to group the body content in an HTML table.
//The <tbody> element is used in conjunction with the <thead> and <tfoot> elements to specify each part of a table (body, header, footer).
//Browsers can use these elements to enable scrolling of the table body independently of the header and footer. Also, when printing a large table that spans multiple pages, these elements can enable the table header and footer to be printed at the top and bottom of each page.
//The <tbody> tag must be used in the following context: As a child of a <table> element, after any <caption>, <colgroup>, and <thead> elements.

</script>

</body>
</html>
