<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Positive Portfolio Factor</title>
  <!-- Link to the jQuery -->
  <script src="https://code.jquery.com/jquery-2.2.3.js" integrity="sha256-laXWtGydpwqJ8JA+X9x2miwmaiKhn8tVmOVEigRNtP4=" crossorigin="anonymous"></script>
  <!-- Link to the Bootstrap-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  <!-- link to google fonts -->
  <link href="https://fonts.googleapis.com/css?family=Cairo|Montserrat|Raleway|Titillium+Web" rel="stylesheet">
  <!--Link to Firebase library-->
  <script src="https://www.gstatic.com/firebasejs/4.3.0/firebase.js"></script>
  <!--Moment js, date library for parsing, validating, manipulating, and formatting dates-->
  <script src="https://cdn.jsdelivr.net/momentjs/2.18.1/moment.min.js"></script>
  <!-- style css file -->
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
  <div class="container">

    <!--project details; pull from github?-->
        <div class="row">
          <div class ="col-lg-12">
            <div class="panel panel-primary">
              <div class="panel-heading">
                <h3 class ="panel-title current"><strong>Listing of Recent Projects/page 2</strong></h3>
                <!--<a href="#" class="thumbnail">
                  <img src="https://www.wpfreeware.com/wp-content/uploads/2014/09/placeholder-images.jpg" alt="placeholderImage">
                </a>-->
            <!--changes to replace placeholder-->

                <!-- Project users will Get Dumped Dere -->
                <div id = "projects-view"></div>
                
                <!-- Rendered Buttons will get Dumped Here  -->
                <div id="buttons-view"></div>

                <form id="project-form">
                <label for="project-input">Add a Project</label>
                <input type="text" id="movie-input"><br>

      <!-- Button triggers new project to be added -->
      <input id="add-project" type="submit" value="Add a Project">
      </form>




              </div> <!--close panel-heading-->
            </div> <!--close panel-primary-->


</body>
<footer>
  <div class="row">
    <div class ="col-lg-12">
      <div class="panel panel">
        <div class="panel-heading">
          <p class ="panel-title current" style="text-align:center">&copy;2017 PWAG!</p>
        </div> <!--close panel-heading-->
      </div> <!--close class panel-primary-->
    </div>  <!--close col-lg-12-->
  </div> <!--close row-->
</footer>

 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">

 ///array of what is in firebase
 var githubUsers = ["pfleegmatic", "Tronnie"];

 // Function for dumping the JSON content for each button into the div
      function displayUserInfo() {

  var githubUser = $(this).attr("data-name");
  var queryURL = "https://api.github.com/users/"+ githubUser +"/repos";

 $.ajax({
          url: queryURL,
          method: "GET"
        }).done(function(response) {
          console.log(response) //lists whatever the user published to public


//Pull API
  
      var userName = $("<h1>").text(response[0].login);
      console.log(response[0].owner.login);
      var userURL = $("<a>").attr("href", response[0].html_url).append(userName);
       console.log(response[0].html_url);
      var userImage = $("<img>").attr("src", response[0].avatar_url);
      console.log(response[0].avatar_url)
      var projectDescription = $("<h2>").text(response[0].description);
      console.log(response[0].description);


 // Empty the contents of the user-div, append the new user content
$("#projects-view").empty();
$("#projects-view").html(userName, userURL, userImage, projectDescription);

// $("#projects-view").append(userName, userURL, userImage, projectDescription);
//$("#projects-view").html(JSON.stringify(response));
          renderButtons();
        });
}

// Function for displaying user data
      function renderButtons() {
        // Deleting the buttons prior to adding new users
        // (this is necessary otherwise you will have repeat buttons)
        $("#buttons-view").empty();

        // Looping through the array of users
        for (var i = 0; i < githubUsers.length; i++) {

          // Then dynamicaly generating buttons for each user in the array or firebase callback
          // This code $("<button>") is all jQuery needs to create the beginning and end tag. (<button></button>)
          var a = $("<button>");
          // Adding a class of movie to our button
          a.addClass("githubUser");//added to button, see doc on for .githubUser
          // Adding a data-attribute
          a.attr("data-name", githubUsers[i]);
          // Providing the initial button text
          a.text(githubUsers[i]);
          // Adding the button to the buttons-view div
          $("#buttons-view").append(a);
        }//closes loop
      }//closes render button function


// This function handles events where one button is clicked
      $("#add-project").on("click", function(event) {
        event.preventDefault();

        // This line grabs the input from the textbox
        var githubUser = $("#project-input").val().trim();

        // Adding the movie from the textbox to our array
        githubUsers.push(githubUser);
        console.log(githubUsers)

        // Calling renderButtons which handles the processing of our movie array
        renderButtons();
      });

      // Function for displaying the movie info
      // Using $(document).on instead of $(".movie").on to add event listenersto dynamically generated elements
      $(document).on("click", ".githubUser", displayUserInfo);

      // Calling the renderButtons function to display the intial buttons
      renderButtons();

</script>



</html>
